<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Datenbanken 1 - Kapitel 2 - ER-Modelle</title>

		<link rel="stylesheet" href="reveal.js/css/reset.css">
		<link rel="stylesheet" href="reveal.js/css/reveal.css">

        <link rel="stylesheet" href="src/slides.css">
        <link rel="stylesheet" href="src/sql.css">

		<link rel="stylesheet" href="src/layout.css">
        <link rel="stylesheet" href="lib/joint.min.css" />
        <link rel="stylesheet" href="src/erd.css" />

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="src/rainbow.css">

        <!--<script defer src="lib/fontawesome.all.min.js"/>-->
        <link href="lib/fontawesome.all.min.css" rel="stylesheet">
        <style> .reveal i.fa { font-family:FontAwesome; font-style: normal; } </style>



		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
            <div id="header"></div>
            <div id="footer"></div>
			<div class="slides">
                    <section>
                            <h4 style="text-align:center"><b>Prof. Dr.-Ing. Johannes Schildgen</b><br>
                            <a href="mailto:johannes.schildgen@h-da.de">johannes.schildgen@h-da.de</a></h4>
                            <h1>Datenbanken 1</h1>
                            <h3>Kapitel 2: ER-Modelle</h3>
                            <h4 style="text-align:center">2019-10-21</h4>
                            <img src="img/ccby.png" height="60px" style="position: absolute; left:0px; border:0; bottom:-160px;">
                            <img src="img/hda.png" height="60px" style="position: absolute; right:0px; border:0; bottom:-160px; box-shadow:none">
                        </section>
                        <section>
                            <h2>Datenmodellierung</h2>
                            <h4>Konzeptionelles Datenmodell</h4>
                            <ul>
                                <li>Unabhängig vom eingesetzten DBMS</li>
                                <li><b>ER-Diagramme</b>, UML, ...</li>
                            </ul>
                            <div>
									<div class="stretch erd">
	                [[
	                 { _e: "Personen", pos: [150, 100],
	                  attributes: [
	                   { _a:"PersNr", options:["primary"], pos: [89, 13] },
	                   { _a:"Name", pos: [245, 13] }
	                  ]
	                 },
	                 { _e: "Termine", pos: [530, 100],
	                   attributes: [
	                    { _a:"Datum", pos: [475, 25], options:["primary"] },
	                    { _a:"Uhrzeit", pos: [634, 25], options:["primary"] },
	                    { _a:"Raum", pos: [722, 106], options:["primary"] },
	                    { _a:"Dauer", pos: [650, 189]},
	                    { _a:"Bezeichnung", pos: [475, 189]}
	                   ]
	                 }
	                ],
	                [
	                 { _r: "nehmen teil",
	                   _e: ["Personen", "Termine"],
	                   card: ["N", "M"]
	                 }
	                ]]
								</div></div>
                            </section>
                            <section>
                                <h2>DB-Entwurf</h2>
                                <ol>
                                    <li class="fragment">Wir stellen uns etwas aus der<br>realen Welt vor</li>
                                    <li class="fragment">Modellierung einer <em>Miniwelt</em><br>als konzeptionelles Schema</li>
                                    <li class="fragment">Transformation in ein DB-Schema<br>(Relational, XML, ...)</li>
                                </ol>
                                <div style="position: absolute; top: 120px; right:50px; font-size:250px"><i class="fas fa-lightbulb green"></i><div></div>
                                <aside class="notes">Die Miniwelt ist ein Ausschnitt der realen Welt. Beispiel: Personen haben eine Personalnummer und einen Namen. Dadurch reduzieren wir Personen auf lediglich diese beiden Eigenschaften, die in unserer Miniwelt relevant sind. Das konzeptionelle Schema kann manuell oder semi-automatisch in ein Datenbankschema transformiert werden, z. B. in <code>CREATE TABLE</code>-Befehle oder ein XML-Schema.</aside>
                            </section>
                            <section>
                                <h2>Ziele des DB-Entwurfs</h2>
                                
                                <ul>
                                    <li>Genaue Abbildung</li>
                                    <li>Aktuell</li>
                                    <li>Verständlich</li>
                                    <li>Simpel</li>
                                    <li>Redundanzfrei</li>
                                </ul>
                                <div style="position:absolute; left: 400px; top: 150px; height: 250px; overflow:hidden;">
                                <div class="erd" style="width: 400px;">
                                        [[
                                         { _e: "Personen", pos: [150, 100],
                                          attributes: [
                                           { _a:"Vorname", options:["primary"], pos: [89, 13] },
                                           { _a:"MySpace-URL", pos: [245, 13] },
                                           { _a:"ZKX-Nr.", pos: [175, 183]}
                                          ]
                                         }
                                        ],
                                        [
                                        ]]
                                </div></div>
                                <p style="font-size: 75%">Viele Fehler und Probleme fallen bereits in der Modellierungsphase auf. So können sie frühzeitig behandelt werden.</p>
                                <aside class="notes">Im schlechten Beispiel-Diagramm auf dieser Folie fehlen wichtige Attribute, z. B. der Nachname. Außerdem ist ein Vorname kein sinnvoller Primärschlüssel. Die MySpace-URL ist vermutlich veraltet und was die KNX-Nr. ist, ist unklar. Wird frühzeitig gemäß Kundenanforderungen ein solches konzeptionelles Modell angefertigt, kann Kundenfeedback erfragt und eingearbeitet werden und somit das Modell schrittweise den Anforderungen des Kunden gerecht werden.</aside>
                            </section>
                            <section>
                                <h2>Entity-Relationship-Modell</h2>
                                <p>Das ERM modelliert Dinge (Entities) und<br>Beziehungen (Relationships) zwischen diesen.</p>
                                    <div class="trackinfo"><i class="fas fa-headphones"></i> 7</div>

                                    <div class="stretch erd">
                                            [[
                                             { _e: "Entitätstyp 1", pos: [150, 100] },
                                             { _e: "Entitätstyp 2", pos: [530, 100] }
                                            ],
                                            [
                                             { _r: "Beziehung",
                                               _e: ["Entitätstyp 1", "Entitätstyp 2"],
                                               card: ["", ""]
                                             }
                                            ]]
                                                        </div>
                                    <aside class="notes">Im ER-Diagramm werden Entitätstypen als Rechtecke dargestellt. Ein Entitätstyp ist so etwas wie eine Klasse. Instanzen eines Entitätstypen werden Entities genannt. Das ER-Modell beschreibt also, wie mögliche Entities aussehen können und wie sie in Beziehung zueinander stehen können.</aside>
                            </section>
                            <section>
                                <h2>Entitätstypen und Entities</h2>
                                <div style="position:absolute; left: 600px; top: 150px; height: 200px; overflow:hidden;">
                                <div class="erd" style="width: 200px;">
                                        [[
                                         { _e: "Personen", pos: [20, 50] }
                                        ],
                                        [
                                        ]]
                                </div></div>
                                <h4>Entitätstyp</h4>
                                <ul>
                                    <li>Rechteck im ER-Diagramm</li>
                                    <li>z. B. &quot;Personen&quot;</li>
                                </ul>
                                <h4 style="margin-top: 20px">Entität</h4>
                                <ul>
                                    <li>Unterscheidbare Objekte der Miniwelt</li>
                                    <li><em>Ausprägungen</em> von Entitätstypen</li>
                                    <li>z. B. &quot;Peter mit der Personalnummer 5&quot;</li>
                                    <li>Entitäten tauchen nicht im ER-Diagramm auf</li>
                                </ul>
                                <aside class="notes">ER-Diagramme stellen Metadaten dar. Sie beschreiben, was in einer Datenbank gespeichert werden kann. Sie beinhalten nicht die Daten selbst.</aside>
                            </section>

                            <section>
                                <h2>Attribute</h2>
                                    <ul>
                                        <li>Eigenschaften von Entitäten<br>und Entitätstypen</li>
                                        <li>Haben <em>Werte</em></li>
                                        <li>Ellipsen im ER-Diagramm</li>
                                    </ul>
                                    <p style="font-size: 75%">&quot;Peter hat die Personalnummer 5&quot;</p>
                                    <p style="font-size: 75%; text-align: right">&quot;Personen haben eine Personalnummer<br>und einen Namen&quot;</p>
                                    <div style="position:absolute; left: 620px; top: 150px; height: 200px; overflow:hidden;">
                                    <div class="erd" style="width: 400px;">
                                            [[
                                             { _e: "Personen", pos: [130, 100],
                                              attributes: [
                                                { _a:"PersNr", options:["primary"], pos: [69, 13] },
                                                { _a:"Name", pos: [225, 13] }
                                              ]
                                             }
                                            ],
                                            [
                                            ]]
                                    </div></div>
                                    <aside class="notes">Bei der Erstellung von ER-Diagrammen hilft es immer, sich konkrete Ausprägungen der Entitätstypen vorzustellen, z. B. hier Peter mit der Personalnummer 5, auch wenn Peter nichts im ER-Diagramm zu suchen hat. Wenn man sich jedoch keine Ausprägungen vorstellen kann, hat man meist einen Fehler beim Erstellen des Entitätstyp gemacht. &quot;Personalabteilung&quot; oder &quot;Datenbank&quot; sind zum Beispiel keine sinnvollen instanziierbaren Entitätstypen. Attribute haben einen Datentypen, welcher jedoch im ER-Diagramm in der Regel nicht spezifiziert wird. Auch andere Eigenschaften, z. B. ob ein Attribut Pflicht oder optional ist, tauchen meist im ER-Diagramm nicht auf.</aside>
                            </section>
                            <section>
                                <h2>Primärschlüssel</h2>
                                <div class="trackinfo"><i class="fas fa-headphones"></i> 8</div>
                                <ul>
                                    <li>Entitäten müssen wohlunterscheidbar sein</li>
                                    <li>1 oder mehr Attribute bilden den Primärschlüssel</li>
                                    <li>Beschreibt eine Entität eindeutig</li>
                                    <li>Im ER-Diagramm: Attribut(e) unterstreichen</li>
                                </ul>
                                <div style="height: 200px; overflow:hidden;">
                                        <div class="stretch erd">
                        [[
                         { _e: "Personen", pos: [150, 100],
                          attributes: [
                           { _a:"PersNr", options:["primary"], pos: [89, 13] },
                           { _a:"Name", pos: [245, 13] }
                          ]
                         },
                         { _e: "Termine", pos: [530, 100],
                           attributes: [
                            { _a:"Datum", pos: [415, 15], options:["primary"] },
                            { _a:"Uhrzeit", pos: [535, 15], options:["primary"] },
                            { _a:"Raum", pos: [655, 15], options:["primary"] },
                            { _a:"Dauer", pos: [765, 40]},
                            { _a:"Bezeichnung", pos: [765, 110]}
                           ]
                         }
                        ],
                        [
                         
                        ]]
                                    </div></div>
                                    <aside class="notes">Der Personen-Entitätstyp hat als Primärschlüsselattribut die Personennummer. Dies kann zum Beispiel eine künstlich erzeugte laufende Nummer sein. Termine haben keine solche ID. Hier haben wir einen <em>zusammengesetzten Primärschlüssel</em> aus Datum, Uhrzeit und Raum. Dies bedeutet, dass es am gleichen Tag zur gleichen Zeit im gleichen Raum nur einen einzigen Termin geben darf. Manchmal gibt es mehrere Möglichkeiten, was der Primärschlüssel sein kann (sogenannte <em>Schlüsselkandidaten</em>). Dann muss man sich für einen entscheiden.</aside>
                            </section>
                            <section>
                                <h2>Unterattribute</h2>
                                <p>Attribute können aus mehreren Sub-Attributen zusammengesetzt sein.</p>
                                <div class="stretch erd">
                                        [[
                                         { _e: "Personen", pos: [150, 100],
                                          attributes: [
                                           { _a:"PersNr", options:["primary"], pos: [89, 13] },
                                           { _a:"Name", pos: [245, 13] },
                                           { _a:"Adresse", pos: [409, 105], 
                                                attributes: [
                                                { _a: "Straße", pos: [324, 160] },
                                                { _a: "PLZ", pos: [437, 188] }, 
                                                { _a: "Ort", pos: [550, 170] }
                                                ] }
                                          ]
                                         }
                                        ],
                                        [
                                         
                                        ]]
                                                    </div>
                                <aside class="notes">Personen haben eine Adresse, die aus Straße, Postleitzahl und Ort besteht. Unterattribute können natürlich auch wieder mit Unterattributen versehen werden, um sie noch weiter hierarchisch zu strukturieren.</aside>
                            </section>
                            <section>
                                    <h2>Mehrwertige Attribute</h2>
                                    <div style="height:250px; overflow:hidden;">
                                    <div class="erd">
                                            [[
                                             { _e: "Personen", pos: [150, 100],
                                              attributes: [
                                               { _a:"PersNr", options:["primary"], pos: [89, 13] },
                                               { _a:"Name", pos: [245, 13] },
                                               { _a:"Telefon", pos: [409, 105], options:["multi"] }
                                              ]
                                             }
                                            ],
                                            [
                                             
                                            ]]
                                    </div></div>
                                    <div class="fragment" style="height:200px; overflow:hidden;">
                                    <div class="erd">
                                            [[
                                             { _e: "Personen", pos: [150, 100],
                                              attributes: [
                                               { _a:"PersNr", options:["primary"], pos: [89, 13] },
                                               { _a:"Name", pos: [245, 13] },
                                               { _a:"Telefon", pos: [409, 105], options:["multi"],
                                                attributes: [ 
                                                    { _a:"Typ", pos: [527, 62] },
                                                    { _a:"Nummer", pos: [527, 130] }
                                                ] }
                                              ]
                                             }
                                            ],
                                            [
                                             
                                            ]]
                                    </div></div>
                                    <aside class="notes">Eine Person hat eine Personennummer, einen Namen, aber mehrere (beliebig viele) Telefonnummern. Im unteren Beispiel hat eine Person mehrere Telefonnummern, die wiederrum aus Typ (z. B. &quot;mobil&quot;) und der Telefonnummer bestehen. Es sind beliebige Schachtelungen möglich.</aside>
                                </section>
                                <section>
                                    <h2>Beziehungen</h2>
                                    <div class="trackinfo"><i class="fas fa-headphones"></i> 9</div>
                                    <ul>
                                            <li>Beteiligt sind mind. 2 Entity-Typen</li>
                                            <li>Rauten im ER-Diagramm</li>
                                            <li>Funktionalitäten: 1:1, 1:N / N:1, N:M</li>
                                        </ul>
                                    <br>
                                    <div id="er_termin_1_n">
                                    <div class="stretch erd">
                                            [[
                                             { _e: "Personen", pos: [150, 100],
                                              attributes: [
                                               { _a:"PersNr", options:["primary"], pos: [89, 13] },
                                               { _a:"Name", pos: [245, 13] }
                                              ]
                                             },
                                             { _e: "Termine", pos: [530, 100],
                                               attributes: [
                                                { _a:"Datum", pos: [475, 25], options:["primary"] },
                                                { _a:"Uhrzeit", pos: [634, 25], options:["primary"] },
                                                { _a:"Raum", pos: [722, 106], options:["primary"] },
                                                { _a:"Dauer", pos: [650, 189]},
                                                { _a:"Bezeichnung", pos: [475, 189]}
                                               ]
                                             }
                                            ],
                                            [
                                             { _r: "haben",
                                               _e: ["Personen", "Termine"],
                                               card: ["1", "N"]
                                             }
                                            ]]
                                                        </div>
                                                    </div>
                                </section>

                                <section>
                                    <h2>1:N-Beziehungen</h2>
                                    <div data-clone="er_termin_1_n"></div>
                                    <ul style="position:absolute; top:400px">
                                        <li>Eine Person hat <b>N</b> Termine (beliebig viele)</li>
                                        <li>Ein Termin gehört immer zu <b>einer</b> Person</li>
                                    </ul>
                                <aside class="notes">Man muss den Satz immer mit &quot;Ein(e)...&quot; beginnen. Je nachdem, ob man den Satz fortfährt mit &quot;... hat 1&quot; oder &quot;... hat N&quot;, kommt dementsprechend eine 1 oder ein N an den gegenüberliegenden Entitätstypen. </aside>
                                </section>

                                <section>
                                    <h2>1:N-Beziehungen</h2>
                                    <ul>
                                            <li>Eine Person hat <b>N</b> Termine (beliebig viele)
                                            <ul>
                                                <li>Peter hat einen Friseurtermin</li>
                                                <li>Peter hat einen Zahnarzttermin</li>
                                                <li>Peter hat Fußballtraining</li>
                                            </ul></li>
                                            <li>Ein Termin gehört immer zu <b>einer</b> Person
                                            <ul>
                                                <li>Der Friseurtermin befindet sich in Peters Kalender</li>
                                            </ul></li>
                                    </ul>
                                    <div class="sl-block" data-block-type="text" data-block-id="803fa986b17666bfdaf408fdd0a466d6" style="height: auto; min-width: 30px; min-height: 30px; width: 97px; left: 713px; top: 182px;">
                                            <div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 10; font-size: 300%;">
                                                <p>&nbsp;<i class="fas fa-male green"></i></p>
                                            </div>
                                        </div>
                                        <div class="sl-block" data-block-type="text" style="height: auto; min-width: 30px; min-height: 30px; width: 97px; left: 863px; top: 70px;" data-block-id="e35b024be9ee50b02275dc85728c097a">
                                            <div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11; font-size: 200%;">
                                                <p>&nbsp;<i class="fas fa-cut red"></i></p>
                                            </div>
                                        </div>
                                        <div class="sl-block" data-block-type="text" style="height: auto; min-width: 30px; min-height: 30px; width: 97px; left: 863px; top: 187px;" data-block-id="f50c4cdd82b7e27adc7f41e9f4ccbf52">
                                            <div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 12; font-size: 200%;">
                                                <p>&nbsp;<i class="fas fa-tooth red"></i></p>
                                            </div>
                                        </div>
                                        <div class="sl-block" data-block-type="text" style="height: auto; min-width: 30px; min-height: 30px; width: 97px; left: 863px; top: 292px;" data-block-id="a2ac5fc314e3e44962906767e5fc6849">
                                            <div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 13; font-size: 200%;">
                                                <p>&nbsp;<i class="fas fa-futbol red"></i></p>
                                            </div>
                                        </div>
                                        <div class="sl-block" data-block-type="line" data-block-id="2e05a83f87abdc784d8b2c6f16fdb079" style="width: auto; height: auto; min-width: 1px; min-height: 1px; left: 790px; top: 140px;">
                                            <div class="sl-block-content" data-line-x1="112" data-line-y1="63" data-line-x2="200" data-line-y2="0" data-line-color="#000000" data-line-start-type="none" data-line-end-type="arrow" style="z-index: 14;" data-line-width="4px"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="xMidYMid" width="88" height="63" viewBox="112 0 88 63">
                                                    <line stroke="rgba(0,0,0,0)" stroke-width="15" x1="112" y1="63" x2="195" y2="3"></line>
                                                    <line stroke="#000000" stroke-width="4" x1="112" y1="63" x2="195" y2="3"></line>
                                                    <polygon fill="#000000" transform="translate(195,3) rotate(54.401)" points="0,-6 6,6 -6,6"></polygon>
                                                </svg></div>
                                        </div>
                                        <div class="sl-block" data-block-type="line" style="width: auto; height: auto; min-width: 1px; min-height: 1px; left: 797px; top: 242px;" data-block-id="fcb3feee273f3c640e0cdc84e99dda0d">
                                            <div class="sl-block-content" data-line-x1="112" data-line-y1="63" data-line-x2="193" data-line-y2="63" data-line-color="#000000" data-line-start-type="none" data-line-end-type="arrow" style="z-index: 16;" data-line-width="4px"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="xMidYMid" width="81" height="1" viewBox="112 63 81 1">
                                                    <line stroke="rgba(0,0,0,0)" stroke-width="15" x1="112" y1="63" x2="187" y2="63"></line>
                                                    <line stroke="#000000" stroke-width="4" x1="112" y1="63" x2="187" y2="63"></line>
                                                    <polygon fill="#000000" transform="translate(187,63) rotate(90)" points="0,-6 6,6 -6,6"></polygon>
                                                </svg></div>
                                        </div>
                                        <div class="sl-block" data-block-type="line" style="width: auto; height: auto; min-width: 1px; min-height: 1px; left: 790px; top: 280px;" data-block-id="72d9ee0f675d1cf28f9dd06628f22c05">
                                            <div class="sl-block-content" data-line-x1="112" data-line-y1="63" data-line-x2="200" data-line-y2="133" data-line-color="#000000" data-line-start-type="none" data-line-end-type="arrow" style="z-index: 17;" data-line-width="4px"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="xMidYMid" width="88" height="70" viewBox="112 63 88 70">
                                                    <line stroke="rgba(0,0,0,0)" stroke-width="15" x1="112" y1="63" x2="195" y2="129"></line>
                                                    <line stroke="#000000" stroke-width="4" x1="112" y1="63" x2="195" y2="129"></line>
                                                    <polygon fill="#000000" transform="translate(195,129) rotate(128.501)" points="0,-6 6,6 -6,6"></polygon>
                                                </svg></div>
                                        </div>
                                        <aside class="notes">Der Primärschlüssel von Person ist die PersNr. Wenn wir sagen, dass Peter PersNr 5 hat, kann diese Person beliebig viele Termine haben (0, 1, 2, etc.). Primärschlüssel vom Termin ist (Datum, Uhrzeit, Raum). Da wir die Beziehung &quot;Personen haben Termine&quot; als 1:N definiert haben, darf es für einen bestimmten Termin (z. B. Montag 14:45 Uhr, Raum D14/404) nur eine einzige Person (oder keine!) geben, die diesen Termin hat.</aside>
                                </section>
                                <section>
                                    <h2>N:M-Beziehungen</h2>
                                    <div id="er_termin_1_n">
                                            <div class="stretch erd">
                                                    [[
                                                     { _e: "Personen", pos: [150, 100],
                                                      attributes: [
                                                       { _a:"PersNr", options:["primary"], pos: [89, 13] },
                                                       { _a:"Name", pos: [245, 13] }
                                                      ]
                                                     },
                                                     { _e: "Termine", pos: [530, 100],
                                                       attributes: [
                                                        { _a:"Datum", pos: [475, 25], options:["primary"] },
                                                        { _a:"Uhrzeit", pos: [634, 25], options:["primary"] },
                                                        { _a:"Raum", pos: [722, 106], options:["primary"] },
                                                        { _a:"Dauer", pos: [650, 189]},
                                                        { _a:"Bezeichnung", pos: [475, 189]}
                                                       ]
                                                     }
                                                    ],
                                                    [
                                                     { _r: "nehmen teil",
                                                       _e: ["Personen", "Termine"],
                                                       card: ["N", "M"]
                                                     }
                                                    ]]
                                                                </div>
                                                            </div>
                                        <ul style="position:absolute; top:400px">
                                                <li>Eine Person hat beliebig viele Termine</li>
                                                <li>An einem Termin können beliebig viele Person teilnehmen</li>
                                            </ul>
                                        <aside class="notes">Auch hier lesen wir wieder &quot;Eine Person...&quot; und &quot;An einem Termin...&quot;. Da in beiden Sätze im zweiten Teil &quot;beliebig viele&quot; steht, schreiben wir an die Linien ein N und ein M. Man schreibt nicht N:N, sondern N:M, da es sich in der Regel um unterschiedliche Zahlen handelt. Nur weil Peter 5 Termine hat, heißt das nicht, dass an jedem seiner Termine 5 Personen teilnehmen.</aside>
                                </section>
                                <section>
                                    <h2>N:M-Beziehungen</h2>
                                    <ul>
                                            <li>Eine Person hat beliebig viele Termine
                                            <ul>
                                                <li>Peter hat einen Friseurtermin</li>
                                                <li>Peter hat Fußballtraining</li>
                                            </ul></li>
                                            <li>An einem Termin können beliebig <br>viele Person teilnehmen
                                            <ul>
                                                <li>Am Friseurtermin nimmt Peter teil</li>
                                                <li>Am Fußballtraining nimmt Peter teil</li>
                                                <li>Am Fußballtraining nimmt Katja teil</li>
                                            </ul></li>
                                    </ul>
                                    <div class="sl-block" data-block-type="text" style="height: auto; width: 97px; left: 713px; top: 182px;" data-block-id="ffc2135b40662ffd9ac5ec31631693be">
                                            <div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 10; font-size: 300%;">
                                                <p>&nbsp;<i class="fas fa-male green"></i></p>
                                            </div>
                                        </div>
                                        <div class="sl-block" data-block-type="text" style="height: auto; width: 97px; left: 863px; top: 187px;" data-block-id="db0a43a94d086af2eebc638a16c16afb">
                                            <div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11; font-size: 200%;">
                                                <p>&nbsp;<i class="fas fa-cut red"></i></p>
                                            </div>
                                        </div>
                                        <div class="sl-block" data-block-type="text" style="height: auto; width: 97px; left: 863px; top: 292px;" data-block-id="d60b0f34f45e804bc998065574c2b280">
                                            <div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 12; font-size: 200%;">
                                                <p>&nbsp;<i class="fas fa-futbol red"></i></p>
                                            </div>
                                        </div>
                                        <div class="sl-block" data-block-type="line" style="width: auto; height: auto; left: 797px; top: 242px;" data-block-id="1130463e9fad268df3ba531b721123ef">
                                            <div class="sl-block-content" data-line-x1="112" data-line-y1="63" data-line-x2="193" data-line-y2="63" data-line-color="#000000" data-line-start-type="none" data-line-end-type="arrow" style="z-index: 13;" data-line-width="4px"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="xMidYMid" width="81" height="1" viewBox="112 63 81 1">
                                                    <line stroke="rgba(0,0,0,0)" stroke-width="15" x1="112" y1="63" x2="187" y2="63"></line>
                                                    <line stroke="#000000" stroke-width="4" x1="112" y1="63" x2="187" y2="63"></line>
                                                    <polygon fill="#000000" transform="translate(187,63) rotate(90)" points="0,-6 6,6 -6,6"></polygon>
                                                </svg></div>
                                        </div>
                                        <div class="sl-block" data-block-type="line" style="width: auto; height: auto; left: 790px; top: 280px;" data-block-id="5aa3b1e9a0d197bb6665b87eb49384ee">
                                            <div class="sl-block-content" data-line-x1="112" data-line-y1="63" data-line-x2="200" data-line-y2="133" data-line-color="#000000" data-line-start-type="none" data-line-end-type="arrow" style="z-index: 14;" data-line-width="4px"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="xMidYMid" width="88" height="70" viewBox="112 63 88 70">
                                                    <line stroke="rgba(0,0,0,0)" stroke-width="15" x1="112" y1="63" x2="195" y2="129"></line>
                                                    <line stroke="#000000" stroke-width="4" x1="112" y1="63" x2="195" y2="129"></line>
                                                    <polygon fill="#000000" transform="translate(195,129) rotate(128.501)" points="0,-6 6,6 -6,6"></polygon>
                                                </svg></div>
                                        </div>
                                        <div class="sl-block" data-block-type="text" style="height: auto; width: 97px; left: 713px; top: 362px;" data-block-id="b0ecebb5faed2f39e4553f1d6732c349">
                                            <div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 16; font-size: 300%;">
                                                <p>&nbsp;<i class="fas fa-female green"></i></p>
                                            </div>
                                        </div>
                                        <div class="sl-block" data-block-type="line" style="width: auto; height: auto; left: 790px; top: 362px;" data-block-id="bb0d11142774b64c5756f988f8d6c766">
                                            <div class="sl-block-content" data-line-x1="112" data-line-y1="63" data-line-x2="200" data-line-y2="4" data-line-color="#000000" data-line-start-type="none" data-line-end-type="arrow" style="z-index: 17;" data-line-width="4px"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="xMidYMid" width="88" height="59" viewBox="112 4 88 59">
                                                    <line stroke="rgba(0,0,0,0)" stroke-width="15" x1="112" y1="63" x2="195" y2="7"></line>
                                                    <line stroke="#000000" stroke-width="4" x1="112" y1="63" x2="195" y2="7"></line>
                                                    <polygon fill="#000000" transform="translate(195,7) rotate(56.16)" points="0,-6 6,6 -6,6"></polygon>
                                                </svg></div>
                                        </div>
                                </section>
                                <section>
                                    <h2>Rekursive Beziehung</h2>
                                    <ul>
                                        <li>&quot;Beziehung mit sich selbst&quot;</li>
                                        <li>Entitätstyp nimmt mehrfach an einer Beziehung teil</li>
                                        <li>Rollennamen zur Unterscheidung notwendig</li>
                                    </ul>
                                    <img src="img/2/er_rekursiv.jpg" style="border:0; box-shadow:none; width:300px">
                                    <aside class="notes">Hier wurden die Rollennamen &quot;Mitarbeiter&quot; und &quot;Chef&quot; an die Linien geschrieben. Eine Person hat nur einen Chef, aber sie kann mehrere Mitarbeiter unter sich haben, d.h. sie kann Chef von mehreren Personen sein.</aside>
                                </section>

                                <section>
                                    <h2>Schwache Entitätstypen</h2>
                                    <div class="trackinfo"><i class="fas fa-headphones"></i> 13</div>
                                    <ul>
                                        <li><em>Existenzabhängig</em> von einem anderen Entitätstypen</li>
                                        <li>Kein eigener Primärschlüssel, stattdessen wird der Primärschlüssel vererbt und erweitert</li>
                                        <li>Entitätstyp und Beziehung doppelt umrahmen</li>
                                    </ul>
                                    <div class="stretch erd" style="margin-left: 6cm">
                                            [[
                                                { _e: "Anbieter", pos: [20, 80],
                                                attributes: [
                                                { _a:"Anbieternr.", options:["primary"], pos: [5, 5] },
                                                { _a:"Anbietername", pos: [120, 5] }
                                                ]
                                                },
                                                { _e: "Handytarife", pos: [350, 80], options: ["weak"],
                                                attributes: [
                                                { _a:"Tarifbezeichn.", options:["extending_primary"], pos: [300, 5] },
                                                { _a:"Datenvolumen", pos: [417, 5]},
                                                { _a:"Preis", pos: [520, 40]}
                                                ]
                                                }
                                            ],
                                            [
                                            { _r: "hat",
                                                _e: ["Anbieter", "Handytarife"], options: ["weak"],
                                                card: ["1", "N"]
                                                }
                                            ]]
                                    </div>
                                    <aside class="notes">Handytarife sind ein schwacher Entitätstyp (<em>Weak Entity Type</em>). Die Tarife sind existenzabhängig vom jeweiligen Anbieter des Tarifs. Dies ist daran zu erkennen, dass sowohl Enitätstyp als auch die Beziehung zum Anbieter doppelt umrahmt sind. Zu einem Tarif muss es einen Anbieter geben. Ein Anbieter kann nur dann gelöscht werden, wenn ebenfalls alle seine Tarife gelöscht werden. Die Tarifbezeichnung ist ein <em>erweiternder Primärschlüssel</em>. Sie ist eindeutig für einen bestimmten Anbieter. Es kann einen &quot;Data Extreme&quot;-Tarif bei mehreren Anbietern geben, aber bei jedem nur einmal. Die Kombination aus Anbieternummer und Tarifbezeichnung identifiziert einen Terif eindeutig.</aside>
                                </section>

                                <section>
                                    <h2>Ternäre Beziehungen</h2>
                                    <ul>
                                        <li>Bisher: Beziehungs-Grad = 2 (binäre Beziehung)</li>
                                        <li>Grad: Anzahl der teilnehmenden Entitätstypen</li>
                                        <li>Ternäre Beziehung: Grad = 3</li>
                                    </ul>
                                    <div id="er_degree_3">
                                            <div class="stretch erd">
                                                    [[
                                                     { _e: "Kunden", pos: [150, 100],
                                                      attributes: [
                                                       { _a:"Kundennr", options:["primary"], pos: [89, 13] },
                                                       { _a:"Name", pos: [245, 13] }
                                                      ]
                                                     },
                                                     { _e: "Tarife", pos: [530, 100],
                                                       attributes: [
                                                        { _a:"Bezeichnung", pos: [475, 25], options:["primary"] },
                                                        { _a:"Mindestlaufzeit", pos: [599, 25]},
                                                        { _a:"Preis", pos: [698, 71]}
                                                       ]
                                                     },
                                                     { _e: "Fitnessstudio", pos: [334, 277],
                                                       attributes: [
                                                        { _a:"Strasse", pos: [205, 212], options:["primary"] },
                                                        { _a:"Hausnummer", pos: [205, 275], options:["primary"] },
                                                        { _a:"Ort", pos: [510, 274], options:["primary"] }
                                                       ]
                                                     }
                                                    ],
                                                    [
                                                     { _r: "buchen",
                                                       _e: ["Kunden", "Tarife", "Fitnessstudio"],
                                                       card: ["N", "1", "M"],
                                                       attributes: [{_a:"Datum", pos: [462, 195]}]
                                                     }
                                                    ]]
                                                                </div>
                                                            </div>
                                </section>
                                <section>
                                    <h2>Ternäre Beziehungen</h2>
                                    <div data-clone="er_degree_3"></div>
                                    <ul style="position: absolute; top:500px; font-size: 80%">
                                        <li>Ein Kunde kann in einem Fitnessstudio nur <b>einen</b> Tarif buchen</li>
                                        <li>Ein Kunde kann einen Tarif in <b>vielen</b> Studios buchen</li>
                                        <li>Ein Tarif kann in einem Studio von <b>vielen</b> Kunden gebucht werden</li>
                                    </ul>
                                    <aside class="notes">Auch hier beginnt man zum korrekten Annotieren der Kardinalitäten den Satz wieder mit &quot;Ein...ein...&quot;.</aside>
                                </section>
                                <section>
                                    <h3>Ternäre vs. drei binäre Beziehungen</h3>
                                    <div>
                                    <div class="stretch erd">
                                            [[
                                             { _e: "Kunden", pos: [150, 100],
                                              attributes: [
                                               { _a:"Kundennr", options:["primary"], pos: [89, 13] },
                                               { _a:"Name", pos: [245, 13] }
                                              ]
                                             },
                                             { _e: "Tarife", pos: [530, 100],
                                               attributes: [
                                                { _a:"Bezeichnung", pos: [475, 25], options:["primary"] },
                                                { _a:"Mindestlaufzeit", pos: [599, 25]},
                                                { _a:"Preis", pos: [698, 71]}
                                               ]
                                             },
                                             { _e: "Fitnessstudio", pos: [334, 277],
                                               attributes: [
                                                { _a:"Strasse", pos: [205, 250], options:["primary"] },
                                                { _a:"Hausnummer", pos: [205, 320], options:["primary"] },
                                                { _a:"Ort", pos: [510, 274], options:["primary"] }
                                               ]
                                             }
                                            ],
                                            [
                                             { _r: "buchen",
                                               _e: ["Kunden", "Tarife"],
                                               card: ["N", "1"],
                                               attributes: [{_a:"Datum", pos: [364, 27]}]
                                             },
                                             { _r: "angemeldet bei", pos: [284, 188],
                                               _e: ["Kunden", "Fitnessstudio"],
                                               card: ["N", "M"]                                             
                                             },
                                             { _r: "buchen",
                                               _e: ["Kunden", "Tarife"],
                                               card: ["N", "1"],
                                               attributes: [{_a:"Datum", pos: [364, 27]}]
                                             },
                                             { _r: "gilt in", pos: [452, 193],
                                               _e: ["Fitnessstudio", "Tarife"],
                                               card: ["N", "M"]
                                             }
                                            ]]
                                                        </div>
                                                    </div>
                                            <ul style="position: absolute; top:500px; font-size: 80%">
                                                    <li>Ein Kunde bucht stets nur <b>einen</b> Studio-übergreifenden Tarif.</li>
                                                    <li>Ein Kunde kann bei <b>vielen</b> Studios angemeldet sein</li>
                                                    <li>Ein Tarif ist in <b>vielen</b> Fitnessstudios gültig</li>
                                                </ul>
                                            <aside class="notes">Diese Lösung ist nicht weniger oder mehr richtig als die Lösung mit der ternären Beziehung auf der vorherigen Folie, aber sie modelliert eine komplett andere Miniwelt.</aside>
                                </section>
                                <section>
                                    <h3>N:M- vs. zwei 1:N-Beziehungen</h3>
                                    <div id="er_drink_bad" style="height: 173px; overflow:hidden">
                                            <div class="stretch erd">
                                                    [[
                                                     { _e: "Gäste", pos: [150, 100],
                                                      attributes: [
                                                       { _a:"Kundennr", options:["primary"], pos: [89, 25] },
                                                       { _a:"Tischnr", pos: [245, 25] }
                                                      ]
                                                     },
                                                     { _e: "Getränke", pos: [530, 100],
                                                       attributes: [
                                                        { _a:"Bezeichnung", pos: [475, 25], options:["primary"] },
                                                        { _a:"Preis", pos: [627, 25]}
                                                       ]
                                                     }
                                                    ],
                                                    [
                                                    { _r: "trinken",
                                                       _e: ["Gäste", "Getränke"],
                                                       card: ["N", "M"]
                                                     }
                                                    ]]
                                                                </div>
                                                            </div>

                                            <div class="fragment" id="er_drink_good" style="margin-top: -20px">
                                                <p style="font-size:70%; z-index:9999999 !important">Besser:</p>
                                                    <div class="stretch erd" style="margin-top: -25px;">
                                                            [[
                                                                { _e: "Gäste", pos: [20, 100],
                                                                attributes: [
                                                                { _a:"Kundennr", options:["primary"], pos: [5, 25] },
                                                                { _a:"Tischnr", pos: [120, 25] }
                                                                ]
                                                                },
                                                                { _e: "Bestellpositionen", pos: [350, 100], options: ["weak"],
                                                                attributes: [
                                                                { _a:"Positionnr.", options:["extending_primary"], pos: [375, 25] }
                                                                ]
                                                                },
                                                                { _e: "Getränke", pos: [750, 100],
                                                                attributes: [
                                                                { _a:"Bezeichnung", pos: [695, 25], options:["primary"] },
                                                                { _a:"Preis", pos: [847, 25]}
                                                                ]
                                                                }
                                                            ],
                                                            [
                                                            { _r: "geben auf",
                                                                _e: ["Gäste", "Bestellpositionen"], options: ["weak"],
                                                                card: ["1", "N"]
                                                                },
                                                                { _r: "von",
                                                                _e: ["Bestellpositionen", "Getränke"],
                                                                card: ["N", "1"]
                                                                }
                                                            ]]
                                                                        </div>
                                                                    </div>

                                    <aside class="notes">Gäste bestellen in einer Bar Getränke. Ein Gast kann mehrere Getränke trinken (Kunde Nr. 5 trinkt Rotwein und Mineralwasser) und ein Getränk kann von mehreren Gästen bestellt werden (Kunden 7 und 8 trinken Weißwein). Das Problem hier ist jedoch, dass niemand ein bestimmtes Getränk mehrfach trinken kann. Wir lösen das Problem, indem ein Kunde mehrere Bestellpositionen aufgibt. Jede Position erhält eine für ihn oder sie eindeutige Nummer und enthält nur ein Getränk. Bestellt ein Kunde 2x Rotwein und 1x Mineralwasser, werden dazu drei Bestellpositionen erfasst.</aside>
                                </section>
                                <section>
                                    <h2>Notationsformen</h2>
                                    <div class="columns">
                                <div style="width:100%">
                                    <p style="font-size: 62%">https://de.wikipedia.org/wiki/Entity-Relationship-Modell</p>
                                    <p>Wir verwenden die <em>Chen-Notation</em><br>&nbsp;</p>
                                    
                                    <p>Nicht anpassbar in Chen:</p>
                                    <ul>
                                        <li>Es gibt Orte ohne Personen</li>
                                        <li>Es gibt Personen ohne Ort</li>
                                    </ul>
                                </div>
                                <div style="text-align: right; width: 550px">
                                    <img src="img/2/ERD_Darstellungen.png" style="height:520px; width:329px; border:0; box-shadow: none;">
                                </div>
                                </section>
                                <section>
                                    <h2>Modifizierte Chen-Notation</h2>
                                    <div style="margin-left: 220px; height: 150px; overflow: hidden;">
                                                <div class="erd">
                                                        [[
                                                            { _e: "Personen", pos: [20, 25],
                                                            attributes: [
                                                            ]
                                                            },
                                                            { _e: "Orte", pos: [350, 25],
                                                            attributes: [
                                                            ]
                                                            }
                                                        ],
                                                        [
                                                        { _r: "geboren in",
                                                            _e: ["Personen", "Orte"],
                                                            card: ["mc", "1"]
                                                            }
                                                        ]]
                                                                    </div>
                                                                </div>
                                    <ul>
                                        <li><b>1</b>: Genau eins</li>
                                        <li><b>c</b> (choise): Höchstens eins</li>
                                        <li><b>m</b> (multiple): Mindestens eins</li>
                                        <li><b>mc</b>: Mindestens keins (beliebig viele)</li>
                                    </ul>
                                    <aside class="notes">In der modifizierten Chen-Notation kann erzwungen werden, dass jede Entität eines Entitätstypen mindestens einmal an einer Beziehung teilnehmen muss. Das Diagramm auf dieser Folie sagt, dass jede Person in einem Ort geboren sein muss. Würde man statt der 1 ein c schreiben, kann es Personen ohne Geburtsort geben. Dies entspräche der Chen-Notation N:1 auf der vorherigen Folie oben. Das mc im Diagramm bedeutet, dass es Orte mit vielen (m) Personen, aber auch Orte ohne (c) Personen geben kann. In der normalen Chen-Notation gibt es nur 1 und N, was hier c und mc entspricht.</aside>
                                </section>
                                <section>
                                    <h2>Min-Max-Notation</h2>
                                    <div style="margin-left: 220px; height: 130px; overflow: hidden;">
                                            <div class="erd">
                                                    [[
                                                        { _e: "Personen", pos: [20, 25],
                                                        attributes: [
                                                        ]
                                                        },
                                                        { _e: "Orte", pos: [350, 25],
                                                        attributes: [
                                                        ]
                                                        }
                                                    ],
                                                    [
                                                    { _r: "geboren in",
                                                        _e: ["Personen", "Orte"],
                                                        card: ["(1,1)", "(7,N)"]
                                                        }
                                                    ]]
                                                                </div>
                                                            </div>
                                        <p><i class="fas fa-exclamation-circle red"></i> Achtung: Umgekehrte Schreibweise!</p>
                                        <ul>
                                            <li>(min, max) steht zw. Entitytyp E und Beziehung R</li>
                                            <li>0 &le; min &le; max; max &ge; 1</li>
                                            <li>Jede Entität aus E muss an mindestens min und höchstens max Ausprägungen von R enthalten sein.</li>
                                        </ul>
                                        <aside class="notes">(1,1) entpricht der 1 in der modifizierten Chen-Notation, (0,1) dem c, (0,N) entspricht m und (1,N) mc. Das in diesem Diagramm notierte (7,N) bedeutet: Jeder Ort muss an mindestens 7 Beziehungsinstanzen teilnehmen, maximal an beliebig vielen. Das heißt, dass in jedem Ort mind. 7 Personen geboren sein müssen (auch wenn das Blödsinn ist; nur fürs Beispiel). Jede Person hat aber nur genau einen Geburtsort.</aside>
                                </section>
                                <section>
                                    <h2>Ternäre Bez. in Min-Max</h2>
                                    <div>
                                            <div class="stretch erd">
                                                    [[
                                                     { _e: "Kunden", pos: [150, 100],
                                                      attributes: [
                                                       { _a:"Kundennr", options:["primary"], pos: [89, 13] },
                                                       { _a:"Name", pos: [245, 13] }
                                                      ]
                                                     },
                                                     { _e: "Tarife", pos: [530, 100],
                                                       attributes: [
                                                        { _a:"Bezeichnung", pos: [475, 25], options:["primary"] },
                                                        { _a:"Mindestlaufzeit", pos: [599, 25]},
                                                        { _a:"Preis", pos: [698, 71]}
                                                       ]
                                                     },
                                                     { _e: "Fitnessstudio", pos: [334, 277],
                                                       attributes: [
                                                        { _a:"Strasse", pos: [205, 212], options:["primary"] },
                                                        { _a:"Hausnummer", pos: [205, 275], options:["primary"] },
                                                        { _a:"Ort", pos: [510, 274], options:["primary"] }
                                                       ]
                                                     }
                                                    ],
                                                    [
                                                     { _r: "buchen",
                                                       _e: ["Kunden", "Tarife", "Fitnessstudio"],
                                                       card: ["(0,N)", "(0,N)", "(0,N)"],
                                                       attributes: [{_a:"Datum", pos: [462, 195]}]
                                                     }
                                                    ]]
                                                                </div>
                                                            </div>
                                        <aside class="notes">Kunden können viele Tarife buchen, jeder Tarif kann mehrfach gebucht werden und in einem Fitnessstudio können mehrfach Tarife gebucht werden. In der Chen-Notation konnten wir modellieren, dass ein Kunde in ein und dem selben Fitnessstudio nur einen einzigen Tarif buchen kann. Dies ist in der (Min,Max)-Notation so nicht darstellbar. Hier muss sich lediglich für jeden Entitätstyp gefragt werden: Kann es vorkommen, dass eine Entität dieses Typs nie an der Beziehung teilnimmt und dass sie mehrfach teilnimmt? Gibt es Kunden, die nichts (0) buchen? Ja. Gibt es Kunden die mehrmals (N) buchen? Ja (in einem anderen Fitnessstudio). Daher (0,N).</aside>
                                </section>
                        </div>
                    </div>
            
                    <script src="reveal.js/js/reveal.js"></script>
                    <script src="lib/jquery.js"></script>
                    <script src="lib/lodash.js"></script>
                    <script src="lib/backbone.js"></script>
                    <script src="lib/joint.min.js"></script>
            
                    <script src="src/init_reveal.js"></script>
            
                    <script>
                    if(window.location.search.match( /print-pdf/gi )) {
                            document.getElementById('header').style="display:none";
                            document.getElementById('footer').style="display:none";
                    }
                    </script>
            
            
                </body>
            </html>
